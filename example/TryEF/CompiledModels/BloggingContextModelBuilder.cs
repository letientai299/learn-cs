// <auto-generated />
using System;
using System.Collections.Generic;
using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.Infrastructure;
using Microsoft.EntityFrameworkCore.Metadata;
using Microsoft.EntityFrameworkCore.Metadata.Internal;
using Microsoft.EntityFrameworkCore.Migrations;

#pragma warning disable 219, 612, 618
#nullable disable

namespace Example.CompiledModels
{
    public partial class BloggingContextModel
    {
        partial void Initialize()
        {
            var blog = BlogEntityType.Create(this);
            var post = PostEntityType.Create(this);

            PostEntityType.CreateForeignKey1(post, blog);

            BlogEntityType.CreateAnnotations(blog);
            PostEntityType.CreateAnnotations(post);

            AddAnnotation("ProductVersion", "8.0.8");
            AddRuntimeAnnotation("Relational:RelationalModel", CreateRelationalModel());
        }

        private IRelationalModel CreateRelationalModel()
        {
            var relationalModel = new RelationalModel(this);

            var blog = FindEntityType("Blog")!;

            var defaultTableMappings = new List<TableMappingBase<ColumnMappingBase>>();
            blog.SetRuntimeAnnotation("Relational:DefaultMappings", defaultTableMappings);
            var blogTableBase = new TableBase("Blog", null, relationalModel);
            var idColumnBase = new ColumnBase<ColumnMappingBase>("Id", "INTEGER", blogTableBase);
            blogTableBase.Columns.Add("Id", idColumnBase);
            var urlColumnBase = new ColumnBase<ColumnMappingBase>("Url", "TEXT", blogTableBase);
            blogTableBase.Columns.Add("Url", urlColumnBase);
            relationalModel.DefaultTables.Add("Blog", blogTableBase);
            var blogMappingBase = new TableMappingBase<ColumnMappingBase>(blog, blogTableBase, true);
            blogTableBase.AddTypeMapping(blogMappingBase, false);
            defaultTableMappings.Add(blogMappingBase);
            RelationalModel.CreateColumnMapping((ColumnBase<ColumnMappingBase>)idColumnBase, blog.FindProperty("Id")!, blogMappingBase);
            RelationalModel.CreateColumnMapping((ColumnBase<ColumnMappingBase>)urlColumnBase, blog.FindProperty("Url")!, blogMappingBase);

            var tableMappings = new List<TableMapping>();
            blog.SetRuntimeAnnotation("Relational:TableMappings", tableMappings);
            var blogsTable = new Table("Blogs", null, relationalModel);
            var idColumn = new Column("Id", "INTEGER", blogsTable);
            blogsTable.Columns.Add("Id", idColumn);
            var urlColumn = new Column("Url", "TEXT", blogsTable);
            blogsTable.Columns.Add("Url", urlColumn);
            var pK_Blogs = new UniqueConstraint("PK_Blogs", blogsTable, new[] { idColumn });
            blogsTable.PrimaryKey = pK_Blogs;
            var pK_BlogsUc = RelationalModel.GetKey(this,
                "Blog",
                new[] { "Id" });
            pK_Blogs.MappedKeys.Add(pK_BlogsUc);
            RelationalModel.GetOrCreateUniqueConstraints(pK_BlogsUc).Add(pK_Blogs);
            blogsTable.UniqueConstraints.Add("PK_Blogs", pK_Blogs);
            relationalModel.Tables.Add(("Blogs", null), blogsTable);
            var blogsTableMapping = new TableMapping(blog, blogsTable, true);
            blogsTable.AddTypeMapping(blogsTableMapping, false);
            tableMappings.Add(blogsTableMapping);
            RelationalModel.CreateColumnMapping(idColumn, blog.FindProperty("Id")!, blogsTableMapping);
            RelationalModel.CreateColumnMapping(urlColumn, blog.FindProperty("Url")!, blogsTableMapping);

            var post = FindEntityType("Post")!;

            var defaultTableMappings0 = new List<TableMappingBase<ColumnMappingBase>>();
            post.SetRuntimeAnnotation("Relational:DefaultMappings", defaultTableMappings0);
            var postTableBase = new TableBase("Post", null, relationalModel);
            var blogIdColumnBase = new ColumnBase<ColumnMappingBase>("BlogId", "INTEGER", postTableBase);
            postTableBase.Columns.Add("BlogId", blogIdColumnBase);
            var contentColumnBase = new ColumnBase<ColumnMappingBase>("Content", "TEXT", postTableBase);
            postTableBase.Columns.Add("Content", contentColumnBase);
            var idColumnBase0 = new ColumnBase<ColumnMappingBase>("Id", "INTEGER", postTableBase);
            postTableBase.Columns.Add("Id", idColumnBase0);
            var titleColumnBase = new ColumnBase<ColumnMappingBase>("Title", "TEXT", postTableBase);
            postTableBase.Columns.Add("Title", titleColumnBase);
            relationalModel.DefaultTables.Add("Post", postTableBase);
            var postMappingBase = new TableMappingBase<ColumnMappingBase>(post, postTableBase, true);
            postTableBase.AddTypeMapping(postMappingBase, false);
            defaultTableMappings0.Add(postMappingBase);
            RelationalModel.CreateColumnMapping((ColumnBase<ColumnMappingBase>)idColumnBase0, post.FindProperty("Id")!, postMappingBase);
            RelationalModel.CreateColumnMapping((ColumnBase<ColumnMappingBase>)blogIdColumnBase, post.FindProperty("BlogId")!, postMappingBase);
            RelationalModel.CreateColumnMapping((ColumnBase<ColumnMappingBase>)contentColumnBase, post.FindProperty("Content")!, postMappingBase);
            RelationalModel.CreateColumnMapping((ColumnBase<ColumnMappingBase>)titleColumnBase, post.FindProperty("Title")!, postMappingBase);

            var tableMappings0 = new List<TableMapping>();
            post.SetRuntimeAnnotation("Relational:TableMappings", tableMappings0);
            var postsTable = new Table("Posts", null, relationalModel);
            var idColumn0 = new Column("Id", "INTEGER", postsTable);
            postsTable.Columns.Add("Id", idColumn0);
            var blogIdColumn = new Column("BlogId", "INTEGER", postsTable);
            postsTable.Columns.Add("BlogId", blogIdColumn);
            var contentColumn = new Column("Content", "TEXT", postsTable);
            postsTable.Columns.Add("Content", contentColumn);
            var titleColumn = new Column("Title", "TEXT", postsTable);
            postsTable.Columns.Add("Title", titleColumn);
            var pK_Posts = new UniqueConstraint("PK_Posts", postsTable, new[] { idColumn0 });
            postsTable.PrimaryKey = pK_Posts;
            var pK_PostsUc = RelationalModel.GetKey(this,
                "Post",
                new[] { "Id" });
            pK_Posts.MappedKeys.Add(pK_PostsUc);
            RelationalModel.GetOrCreateUniqueConstraints(pK_PostsUc).Add(pK_Posts);
            postsTable.UniqueConstraints.Add("PK_Posts", pK_Posts);
            var iX_Posts_BlogId = new TableIndex(
            "IX_Posts_BlogId", postsTable, new[] { blogIdColumn }, false);
            var iX_Posts_BlogIdIx = RelationalModel.GetIndex(this,
                "Post",
                new[] { "BlogId" });
            iX_Posts_BlogId.MappedIndexes.Add(iX_Posts_BlogIdIx);
            RelationalModel.GetOrCreateTableIndexes(iX_Posts_BlogIdIx).Add(iX_Posts_BlogId);
            postsTable.Indexes.Add("IX_Posts_BlogId", iX_Posts_BlogId);
            relationalModel.Tables.Add(("Posts", null), postsTable);
            var postsTableMapping = new TableMapping(post, postsTable, true);
            postsTable.AddTypeMapping(postsTableMapping, false);
            tableMappings0.Add(postsTableMapping);
            RelationalModel.CreateColumnMapping(idColumn0, post.FindProperty("Id")!, postsTableMapping);
            RelationalModel.CreateColumnMapping(blogIdColumn, post.FindProperty("BlogId")!, postsTableMapping);
            RelationalModel.CreateColumnMapping(contentColumn, post.FindProperty("Content")!, postsTableMapping);
            RelationalModel.CreateColumnMapping(titleColumn, post.FindProperty("Title")!, postsTableMapping);
            var fK_Posts_Blogs_BlogId = new ForeignKeyConstraint(
                "FK_Posts_Blogs_BlogId", postsTable, blogsTable,
                new[] { blogIdColumn },
                blogsTable.FindUniqueConstraint("PK_Blogs")!, ReferentialAction.Cascade);
            var fK_Posts_Blogs_BlogIdFk = RelationalModel.GetForeignKey(this,
                "Post",
                new[] { "BlogId" },
                "Blog",
                new[] { "Id" });
            fK_Posts_Blogs_BlogId.MappedForeignKeys.Add(fK_Posts_Blogs_BlogIdFk);
            RelationalModel.GetOrCreateForeignKeyConstraints(fK_Posts_Blogs_BlogIdFk).Add(fK_Posts_Blogs_BlogId);
            postsTable.ForeignKeyConstraints.Add(fK_Posts_Blogs_BlogId);
            blogsTable.ReferencingForeignKeyConstraints.Add(fK_Posts_Blogs_BlogId);
            return relationalModel.MakeReadOnly();
        }
    }
}
